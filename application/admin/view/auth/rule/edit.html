{extend name="layout/default" /}
{block name="content"}
<body>
<div class="layui-container lay_top">
    <div class="layui-row layui-col-space30">
        <div class="layui-col-xs12">
        <form class="layui-form" action="" lay-filter="rule" id="formRule">
            <div class="layui-form-item">
                <label class="layui-form-label">菜单</label>
                <div class="layui-input-block">
                    <input type="checkbox" name="ismenu" lay-skin="switch" lay-text="是|否" {$list['ismenu'] == 1? 'checked' : ''}>
                    <input type="hidden" name="id" value="{$list['id']}">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">父级</label>
                <div class="layui-input-block">
                    {:build_select('pid', $ruledata, $list['pid'], ['class'=>'form-control', 'required'=>''])}
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">规则</label>
                <div class="layui-input-block">
                    <input type="text" name="name" autocomplete="off" value="{$list['name']}" placeholder="规则名称" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">标题</label>
                <div class="layui-input-block">
                    <input type="title" name="title"  data-rule="required;email" placeholder="标题" value="{$list['title']}" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">图标</label>
                <div class="layui-input-block">
                    <input type="icon" name="icon" placeholder="图标" value="{$list['icon']}" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">权重</label>
                <div class="layui-input-block">
                    <input type="weigh" name="weigh" placeholder="权重" value="{$list['weigh']}" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item layui-form-text">
                <label class="layui-form-label">规则条件</label>
                <div class="layui-input-block">
                    <textarea placeholder="规则条件" class="layui-textarea" name="condition" rows="3">{$list['condition']}</textarea>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">状态</label>
                <div class="layui-input-block">
                    <input type="checkbox" name="status" lay-skin="switch" lay-text="启用|禁止"  {$list['status'] == 1? 'checked' : ''}>
                </div>
            </div>
            <div class="layui-form-item layui-form-text">
                <label class="layui-form-label">备注</label>
                <div class="layui-input-block">
                    <textarea placeholder="备注" class="layui-textarea" name="remark">{$list['remark']}</textarea>
                </div>
            </div>

            <div class="layui-form-item footer-form">
                <div class="footer">
                    <button type="submit" lay-submit="" lay-filter="formRule" class="layui-btn btn-success btn-embossed disabled">{:__('OK')}</button>
                    <button type="reset" class="layui-btn layui-btn-primary btn-embossed">{:__('Reset')}</button>
                </div>
            </div>
        </form>
        </div>
    </div>
</div>
{/block}
{block name="script"}
<script>
    layui.config({
        base: "__STATIC__/", //静态资源所在路径
        skin: 'layui-layer-we'
    }).extend({
        index: 'lib/index' //主入口模块
        ,validator:'jquery.validator'
        ,zhCN:'zh-CN'
    }).link(
        '__STATIC__/style/jquery.validator.css'
    ).use(['jquery','index','form','element','we','validator','zhCN'], function(){
        var admin = layui.admin
            ,$ = layui.$
            ,form = layui.form
            ,table = layui.table
            ,validator = layui.validator
            ,zhCN = layui.zhCN
            ,we = layui.we;
        //监听提交
        form.on('submit(formRule)', function(data){
            $('#formRule').validator({
                fields: {
                    title: "required",
                },
                valid: function(form){
                    var formData = JSON.stringify(data.field);
                    we.api.ajax({"url":"{:url('admin/auth.rule/edit','',false)}","data":data.field,'tableid':'tableReload'});
                }
            });

        });
    });
</script>
</body>
</html>
{/block}